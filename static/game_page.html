<!doctype html>
<html>
  <head>
    <style>
      body {
        background-color: Canvas;
        color: CanvasText;
        color-scheme: light dark;
      }
    </style>
    <title id="title"></title>
    <body>
      <h1 id="headingname"></h1>
      <p id="summary"></p>
      <label for="status">Status</label>
      <select name="status" id="status">
        <option value="unplayed">Unplayed</option>
        <option value="played">Played</option>
      </select>
      <button type="button">Add</button>
      <script>
        const urlParams = new URLSearchParams(window.location.search);
        const gameId = urlParams.get("id");
        const game = JSON.parse(sessionStorage.getItem(`game_${gameId}`));
        console.log(game);

        console.log(
          "id: " +
            game.id +
            "\ngameName " +
            game.name +
            "\ndate: " +
            game.releaseDate +
            "\ndev: " +
            game.developer,
        );
        const title = document.getElementById("title");
        title.innerText = game.name;
        const heading = document.getElementById("headingname");
        const summary = document.getElementById("summary");
        heading.innerText = game.name;
        summary.innerText = game.summary;

        //button press
        const button = document.querySelector("button");
        const select = document.querySelector("select");
        button.addEventListener("click", async (event) => {
          try {
            const response = await fetch(
              `/savegame?gameId=${encodeURIComponent(gameId)}&name=${encodeURIComponent(gameName)}&date=${encodeURIComponent(gameDate)}&dev=${encodeURIComponent(dev)}&status=${encodeURIComponent(select.value)}`,
            );
          } catch (error) {
            console.log(error);
          }
        });
      </script>
    </body>
  </head>
</html>
